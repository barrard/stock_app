(window.webpackJsonp=window.webpackJsonp||[]).push([["ebcf"],{O2ls:function(e,t,a){"use strict";a.r(t);var n=a("Rbzu"),r=a("UrUy"),l=a.n(r),c=a("JYC+"),s=a.n(c),o=a("R3/3"),i=a("azxR"),u=a("LkAs"),m=a("Moms"),p=a("bMj6"),d=a("hZod"),f=a("YKN3"),h=a("tEuJ"),E=a("mXGw"),b=a.n(E),g=a("/m4v"),v=a("bBV7"),w=a.n(v),_=a("RIvd"),N=a("mShl"),O=function(e){function t(e){var a;return Object(u.default)(this,t),(a=Object(p.default)(this,Object(d.default)(t).call(this,e))).state={email:"111@gg.com",password:"1",_csrf:e.csrf},a}return Object(h.default)(t,e),Object(m.default)(t,[{key:"handle_input",value:function(e,t){this.setState(Object(i.a)({},t,e)),this.props.handle_input(e,t)}},{key:"handle_login",value:function(e){console.log("handle_login!!");var t=this.state,a=t.email,n=t.password;e.preventDefault(),this.props.handle_login({email:a,password:n})}},{key:"render",value:function(){var e=this;return b.a.createElement("div",{className:"container"},b.a.createElement("form",{onSubmit:function(t){return e.handle_login(t)}},b.a.createElement("div",{className:"form-group row"},b.a.createElement("label",{htmlFor:"example-text-input",className:"col-4 col-form-label"},"Email address"),b.a.createElement("div",{className:"col-8"},b.a.createElement("input",{onChange:function(t){return e.handle_input(t.target.value,"email")},className:"form-control",type:"email",name:"email",value:this.state.email,placeholder:"e.g. jack@example.com"}))),b.a.createElement("div",{className:"form-group row"},b.a.createElement("label",{htmlFor:"example-text-input",className:"col-4 col-form-label"},"Password"),b.a.createElement("div",{className:"col-8"},b.a.createElement("input",{onChange:function(t){return e.handle_input(t.target.value,"password")},className:"form-control",type:"password",name:"password",value:this.state.password,placeholder:"*******"}))),b.a.createElement("div",{className:"form-group row"},b.a.createElement("label",{htmlFor:"example-text-input",className:"col-4 col-form-label"}),b.a.createElement("div",{className:"col-8"},b.a.createElement("div",{className:"form-check"},b.a.createElement("label",{className:"form-check-label"},b.a.createElement("input",{className:"form-check-input",name:"remember_me",type:"checkbox"})," ","Remember me")))),b.a.createElement("input",{type:"hidden",name:"_csrf",value:this.state._csrf}),b.a.createElement("br",null),b.a.createElement("br",null),b.a.createElement("div",{className:"form-group"},b.a.createElement("div",{className:"offset-sm-2 col-sm-8"},b.a.createElement("input",{className:"btn btn-lg btn-primary btn-block",name:"submit",type:"submit",value:"Login"})))),b.a.createElement("p",null,this.props.go),b.a.createElement("div",{className:"col-sm-12 justify_center"},b.a.createElement("h3",null,"Other login options")),b.a.createElement(N.a,null))}}]),t}(b.a.Component),j=a("eKws"),k=a("4cCf"),y=a("heMW"),T=j.b,x=j.a,L=function(e){function t(e){var a;return Object(u.default)(this,t),(a=Object(p.default)(this,Object(d.default)(t).call(this,e))).state={errors:[],email:"111@gg.com",password:"1",confirm_password:"1",_csrf:e.csrf},a.handle_login=a.handle_login.bind(Object(f.default)(a)),a.handle_login_resp=a.handle_login_resp.bind(Object(f.default)(a)),a.handle_input=a.handle_input.bind(Object(f.default)(a)),a}return Object(h.default)(t,e),Object(m.default)(t,[{key:"componentDidMount",value:function(){}},{key:"handle_input",value:function(e,t){this.setState(Object(i.a)({},t,e))}},{key:"handle_login",value:function(){var e=Object(o.default)(l.a.mark(function e(t){var a,n,r,c;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.dispatch(x(t)),e.prev=1,a=this.props.meta.csrf,console.log({_csrf:a}),n=t.email,r=t.password,e.next=7,fetch("/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:s()({email:n,password:r,_csrf:a})});case 7:c=e.sent,this.handle_login_resp(c),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(1),console.log("err"),console.log(e.t0);case 15:case"end":return e.stop()}},e,this,[[1,11]])}));return function(t){return e.apply(this,arguments)}}()},{key:"handle_login_resp",value:function(){var e=Object(o.default)(l.a.mark(function e(t){var a;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log("handle_login_resp"),console.log(t),e.next=5,t.json();case 5:a=e.sent,console.log(a),a.errors&&a.errors.length?(console.log("WE GOT ERRORS"),a.errors.map(function(e){_.toastr.error("Error Message","".concat(e.msg))}),this.setState({errors:a.errors.map(function(e){return e})})):a.success&&(_.toastr.success("Welcome back ".concat(this.state.email),"You are being logged in as ".concat(this.state.email)),w.a.push("/account-profile"),this.props.dispatch(T(a.user))),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),console.log("err"),console.log(e.t0);case 14:case"end":return e.stop()}},e,this,[[0,10]])}));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){return console.log(this.props),console.log(this),b.a.createElement(k.a,{className:"container"},b.a.createElement("br",null),b.a.createElement("br",null),b.a.createElement("div",{className:"row mt-5 text-center"},b.a.createElement("div",{className:"col-md-6 offset-md-3"},b.a.createElement("h1",null,"Login"),b.a.createElement("p",{className:"lead mb-1"},"Start Today",b.a.createElement("br",null)),b.a.createElement("br",null))),b.a.createElement("div",{className:"row mt-5 justify_center"},b.a.createElement("div",{className:"col-md-6 "},b.a.createElement(O,{csrf:this.props.csrf,handle_input:this.handle_input,handle_login:this.handle_login}),b.a.createElement("div",{className:"row"},b.a.createElement("div",{className:"offset-sm-2 col-sm-8 text-center"},b.a.createElement("a",{className:"btn btn-link",href:"password-reset"},"Forgot Your Password?"))))))}}],[{key:"getInitialProps",value:function(){var e=Object(o.default)(l.a.mark(function e(t){var a;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.store.getState(),Object(y.b)(t),e.abrupt("return",{state:a});case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()}]),t}(b.a.Component);t.default=Object(g.connect)(function(e){return e.meta,Object(n.a)({},e)})(L)},eKws:function(e,t,a){"use strict";a.d(t,"e",function(){return o}),a.d(t,"c",function(){return i}),a.d(t,"d",function(){return u}),a.d(t,"a",function(){return m}),a.d(t,"b",function(){return p});var n=a("XzKa"),r=a.n(n),l=r()("LOGIN_ATTEMPT"),c=(r()("LOGIN_ATTEMPT_SUCCESS"),r()("LOGIN_ATTEMPT_FAIL"),r()("REGISTER_ATTEMPT")),s=r()("REGISTER_ATTEMPT_SUCCESS");r()("REGISTER_ATTEMPT_FAIL");function o(e){return function(t){t({type:"SET_USER",user:e,is_loggedin:!0})}}function i(e){var t=e.email,a=e.password;return function(e){e({type:c,username:t,password:a})}}function u(e){return{type:s,payload:e}}function m(e){var t=e.email,a=e.password;return function(e){e({type:l,username:t,password:a})}}function p(e){return{type:"SET_USER",user:e}}},mShl:function(e,t,a){"use strict";var n=a("LkAs"),r=a("Moms"),l=a("bMj6"),c=a("hZod"),s=a("tEuJ"),o=a("mXGw"),i=a.n(o),u=function(e){function t(e){var a;return Object(n.default)(this,t),(a=Object(l.default)(this,Object(c.default)(t).call(this,e))).state={},a}return Object(s.default)(t,e),Object(r.default)(t,[{key:"render",value:function(){return i.a.createElement("div",{className:"col-sm-12"},i.a.createElement("div",{className:"row justify_center"},i.a.createElement("a",{href:"/auth/facebook",className:"sc-btn sc--flat sc--facebook"},i.a.createElement("span",{className:"sc-icon"},i.a.createElement("svg",{viewBox:"0 0 33 33",width:"25",height:"25",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink"},i.a.createElement("g",null,i.a.createElement("path",{d:"M 17.996,32L 12,32 L 12,16 l-4,0 l0-5.514 l 4-0.002l-0.006-3.248C 11.993,2.737, 13.213,0, 18.512,0l 4.412,0 l0,5.515 l-2.757,0 c-2.063,0-2.163,0.77-2.163,2.209l-0.008,2.76l 4.959,0 l-0.585,5.514L 18,16L 17.996,32z"})))),i.a.createElement("span",{className:"sc-text"},"Sign in with Facebook")),i.a.createElement("a",{href:"/auth/google",className:"sc-btn sc--flat sc--google-plus"},i.a.createElement("span",{className:"sc-icon"},i.a.createElement("svg",{viewBox:"0 0 33 33",width:"25",height:"25",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink"},i.a.createElement("g",null,i.a.createElement("path",{d:"M 17.471,2c0,0-6.28,0-8.373,0C 5.344,2, 1.811,4.844, 1.811,8.138c0,3.366, 2.559,6.083, 6.378,6.083 c 0.266,0, 0.524-0.005, 0.776-0.024c-0.248,0.475-0.425,1.009-0.425,1.564c0,0.936, 0.503,1.694, 1.14,2.313 c-0.481,0-0.945,0.014-1.452,0.014C 3.579,18.089,0,21.050,0,24.121c0,3.024, 3.923,4.916, 8.573,4.916 c 5.301,0, 8.228-3.008, 8.228-6.032c0-2.425-0.716-3.877-2.928-5.442c-0.757-0.536-2.204-1.839-2.204-2.604 c0-0.897, 0.256-1.34, 1.607-2.395c 1.385-1.082, 2.365-2.603, 2.365-4.372c0-2.106-0.938-4.159-2.699-4.837l 2.655,0 L 17.471,2z M 14.546,22.483c 0.066,0.28, 0.103,0.569, 0.103,0.863c0,2.444-1.575,4.353-6.093,4.353 c-3.214,0-5.535-2.034-5.535-4.478c0-2.395, 2.879-4.389, 6.093-4.354c 0.75,0.008, 1.449,0.129, 2.083,0.334 C 12.942,20.415, 14.193,21.101, 14.546,22.483z M 9.401,13.368c-2.157-0.065-4.207-2.413-4.58-5.246 c-0.372-2.833, 1.074-5.001, 3.231-4.937c 2.157,0.065, 4.207,2.338, 4.58,5.171 C 13.004,11.189, 11.557,13.433, 9.401,13.368zM 26,8L 26,2L 24,2L 24,8L 18,8L 18,10L 24,10L 24,16L 26,16L 26,10L 32,10L 32,8 z"})))),i.a.createElement("span",{className:"sc-text"},"Sign in with Google+"))))}}]),t}(i.a.Component);t.a=u},qpEA:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/login",function(){var e=a("O2ls");return{page:e.default||e}}])}},[["qpEA","5d41","9da1"]]]);